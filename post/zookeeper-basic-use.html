<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Zookeeper的基本使用 | 远方的灯塔 - 专注于服务端技术分享</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <script src="/js/jsdelivr-auto-fallback.js"></script>
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ecf13ffee9f4083d9a74b337b541f90b";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script>
    <meta name="description" content="ZNode 是 Zookeeper 中的最小数据单位。ZNode 可以挂在子 ZNode，最终形成了 ZNode 树，成为 ZNode Tree。ZNode 采用了类似文件系统的层级树状结构进行管理。">
    <meta name="keywords" content="framework zk zookeeper">
    <meta name="baidu-site-verification" content="code-UZwHLL02hz">
    <meta name="google-site-verification" content="Tq0dPCkigu48T8b7pBXwKAT7NTC3_4ZqTj9e2n5lG6E">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.32b41a9c.css" as="style"><link rel="preload" href="/assets/js/app.26a0fb1a.js" as="script"><link rel="preload" href="/assets/js/2.8656c062.js" as="script"><link rel="preload" href="/assets/js/4.79e7f4de.js" as="script"><link rel="preload" href="/assets/js/212.d1d8f2d3.js" as="script"><link rel="prefetch" href="/assets/js/10.840df50c.js"><link rel="prefetch" href="/assets/js/100.1cab2692.js"><link rel="prefetch" href="/assets/js/101.159f3f09.js"><link rel="prefetch" href="/assets/js/102.9bfbcab3.js"><link rel="prefetch" href="/assets/js/103.b0621cba.js"><link rel="prefetch" href="/assets/js/104.e42909da.js"><link rel="prefetch" href="/assets/js/105.5c423409.js"><link rel="prefetch" href="/assets/js/106.21613b1c.js"><link rel="prefetch" href="/assets/js/107.42abadce.js"><link rel="prefetch" href="/assets/js/108.619fee42.js"><link rel="prefetch" href="/assets/js/109.1f14373b.js"><link rel="prefetch" href="/assets/js/11.70d45cc9.js"><link rel="prefetch" href="/assets/js/110.85a1af18.js"><link rel="prefetch" href="/assets/js/111.ed89c55a.js"><link rel="prefetch" href="/assets/js/112.7b1234b0.js"><link rel="prefetch" href="/assets/js/113.5d72903d.js"><link rel="prefetch" href="/assets/js/114.e2746156.js"><link rel="prefetch" href="/assets/js/115.f8522c79.js"><link rel="prefetch" href="/assets/js/116.310f09a3.js"><link rel="prefetch" href="/assets/js/117.d3eb4dc2.js"><link rel="prefetch" href="/assets/js/118.a8e94602.js"><link rel="prefetch" href="/assets/js/119.b891ce52.js"><link rel="prefetch" href="/assets/js/12.59f0f640.js"><link rel="prefetch" href="/assets/js/120.cf96f16e.js"><link rel="prefetch" href="/assets/js/121.8d6675f5.js"><link rel="prefetch" href="/assets/js/122.59095b02.js"><link rel="prefetch" href="/assets/js/123.9f57c252.js"><link rel="prefetch" href="/assets/js/124.e7594490.js"><link rel="prefetch" href="/assets/js/125.68a3acf6.js"><link rel="prefetch" href="/assets/js/126.c260285e.js"><link rel="prefetch" href="/assets/js/127.86de7b0a.js"><link rel="prefetch" href="/assets/js/128.5cb065e5.js"><link rel="prefetch" href="/assets/js/129.0f76c09c.js"><link rel="prefetch" href="/assets/js/13.5d59dd3a.js"><link rel="prefetch" href="/assets/js/130.0fed5af9.js"><link rel="prefetch" href="/assets/js/131.2e3c66e1.js"><link rel="prefetch" href="/assets/js/132.bbf6d1d6.js"><link rel="prefetch" href="/assets/js/133.7fb0316a.js"><link rel="prefetch" href="/assets/js/134.1508dbce.js"><link rel="prefetch" href="/assets/js/135.a46f8914.js"><link rel="prefetch" href="/assets/js/136.56f73040.js"><link rel="prefetch" href="/assets/js/137.55d060f9.js"><link rel="prefetch" href="/assets/js/138.48761826.js"><link rel="prefetch" href="/assets/js/139.432d1422.js"><link rel="prefetch" href="/assets/js/14.07555006.js"><link rel="prefetch" href="/assets/js/140.ba1f39ab.js"><link rel="prefetch" href="/assets/js/141.7b734860.js"><link rel="prefetch" href="/assets/js/142.139331c0.js"><link rel="prefetch" href="/assets/js/143.474ed648.js"><link rel="prefetch" href="/assets/js/144.009f37ce.js"><link rel="prefetch" href="/assets/js/145.19c10d00.js"><link rel="prefetch" href="/assets/js/146.7bf1f58c.js"><link rel="prefetch" href="/assets/js/147.7201adb8.js"><link rel="prefetch" href="/assets/js/148.5e3e339a.js"><link rel="prefetch" href="/assets/js/149.2baaba3e.js"><link rel="prefetch" href="/assets/js/15.11dbc47c.js"><link rel="prefetch" href="/assets/js/150.4b276150.js"><link rel="prefetch" href="/assets/js/151.a69179e5.js"><link rel="prefetch" href="/assets/js/152.59331ce6.js"><link rel="prefetch" href="/assets/js/153.9529eaba.js"><link rel="prefetch" href="/assets/js/154.beb704ef.js"><link rel="prefetch" href="/assets/js/155.86495158.js"><link rel="prefetch" href="/assets/js/156.1673eb27.js"><link rel="prefetch" href="/assets/js/157.d6639c7f.js"><link rel="prefetch" href="/assets/js/158.ce7b49e6.js"><link rel="prefetch" href="/assets/js/159.6584906f.js"><link rel="prefetch" href="/assets/js/16.e81f4f7f.js"><link rel="prefetch" href="/assets/js/160.1e7d9e5b.js"><link rel="prefetch" href="/assets/js/161.ec791cca.js"><link rel="prefetch" href="/assets/js/162.d103b5b7.js"><link rel="prefetch" href="/assets/js/163.9ad4123f.js"><link rel="prefetch" href="/assets/js/164.ef292f05.js"><link rel="prefetch" href="/assets/js/165.5a1c0e37.js"><link rel="prefetch" href="/assets/js/166.5bd790f3.js"><link rel="prefetch" href="/assets/js/167.cd5e8311.js"><link rel="prefetch" href="/assets/js/168.d8c84a99.js"><link rel="prefetch" href="/assets/js/169.fcf23869.js"><link rel="prefetch" href="/assets/js/17.332c06ee.js"><link rel="prefetch" href="/assets/js/170.844d1381.js"><link rel="prefetch" href="/assets/js/171.080c87ca.js"><link rel="prefetch" href="/assets/js/172.7ffcb558.js"><link rel="prefetch" href="/assets/js/173.57984d61.js"><link rel="prefetch" href="/assets/js/174.d1bdbd34.js"><link rel="prefetch" href="/assets/js/175.5cd42a55.js"><link rel="prefetch" href="/assets/js/176.406fa686.js"><link rel="prefetch" href="/assets/js/177.dfa8dacb.js"><link rel="prefetch" href="/assets/js/178.4277266b.js"><link rel="prefetch" href="/assets/js/179.a59d58c0.js"><link rel="prefetch" href="/assets/js/18.03e257b1.js"><link rel="prefetch" href="/assets/js/180.f5e99111.js"><link rel="prefetch" href="/assets/js/181.816eaea5.js"><link rel="prefetch" href="/assets/js/182.89946934.js"><link rel="prefetch" href="/assets/js/183.ccf1966f.js"><link rel="prefetch" href="/assets/js/184.4c3c2ffe.js"><link rel="prefetch" href="/assets/js/185.663190f5.js"><link rel="prefetch" href="/assets/js/186.c1c86769.js"><link rel="prefetch" href="/assets/js/187.74632169.js"><link rel="prefetch" href="/assets/js/188.1395d629.js"><link rel="prefetch" href="/assets/js/189.442f6dcc.js"><link rel="prefetch" href="/assets/js/19.d4b11416.js"><link rel="prefetch" href="/assets/js/190.79a70178.js"><link rel="prefetch" href="/assets/js/191.fc3a454e.js"><link rel="prefetch" href="/assets/js/192.f67b5b7a.js"><link rel="prefetch" href="/assets/js/193.6cfb4a1a.js"><link rel="prefetch" href="/assets/js/194.2db3aa27.js"><link rel="prefetch" href="/assets/js/195.95ae8b22.js"><link rel="prefetch" href="/assets/js/196.5ecfcf67.js"><link rel="prefetch" href="/assets/js/197.91ff0701.js"><link rel="prefetch" href="/assets/js/198.5ebec2a2.js"><link rel="prefetch" href="/assets/js/199.acc200a6.js"><link rel="prefetch" href="/assets/js/20.fbeae13a.js"><link rel="prefetch" href="/assets/js/200.cb9798e1.js"><link rel="prefetch" href="/assets/js/201.d2cb8ee0.js"><link rel="prefetch" href="/assets/js/202.4b0383e2.js"><link rel="prefetch" href="/assets/js/203.787acada.js"><link rel="prefetch" href="/assets/js/204.5869a3cd.js"><link rel="prefetch" href="/assets/js/205.1822f574.js"><link rel="prefetch" href="/assets/js/206.23e6f56e.js"><link rel="prefetch" href="/assets/js/207.190a1e26.js"><link rel="prefetch" href="/assets/js/208.075d3141.js"><link rel="prefetch" href="/assets/js/209.48aa63a3.js"><link rel="prefetch" href="/assets/js/21.cb093837.js"><link rel="prefetch" href="/assets/js/210.f8132379.js"><link rel="prefetch" href="/assets/js/211.b83a4a90.js"><link rel="prefetch" href="/assets/js/213.596d3af0.js"><link rel="prefetch" href="/assets/js/214.42f53f34.js"><link rel="prefetch" href="/assets/js/215.9e35238e.js"><link rel="prefetch" href="/assets/js/216.7bc628d8.js"><link rel="prefetch" href="/assets/js/217.58019938.js"><link rel="prefetch" href="/assets/js/218.a66d6163.js"><link rel="prefetch" href="/assets/js/219.657829b0.js"><link rel="prefetch" href="/assets/js/22.4ce2c79d.js"><link rel="prefetch" href="/assets/js/220.03c36478.js"><link rel="prefetch" href="/assets/js/221.af3eabae.js"><link rel="prefetch" href="/assets/js/222.c396738d.js"><link rel="prefetch" href="/assets/js/223.352872fb.js"><link rel="prefetch" href="/assets/js/224.92b28415.js"><link rel="prefetch" href="/assets/js/225.e4c8639f.js"><link rel="prefetch" href="/assets/js/226.e6ddae98.js"><link rel="prefetch" href="/assets/js/227.d6f554e7.js"><link rel="prefetch" href="/assets/js/228.c6f3e870.js"><link rel="prefetch" href="/assets/js/229.5d166502.js"><link rel="prefetch" href="/assets/js/23.45365cc8.js"><link rel="prefetch" href="/assets/js/230.c382a05b.js"><link rel="prefetch" href="/assets/js/231.70e6a980.js"><link rel="prefetch" href="/assets/js/232.125460d7.js"><link rel="prefetch" href="/assets/js/233.35a8a919.js"><link rel="prefetch" href="/assets/js/234.c851b1e8.js"><link rel="prefetch" href="/assets/js/235.d9fb867d.js"><link rel="prefetch" href="/assets/js/236.4a69298c.js"><link rel="prefetch" href="/assets/js/237.92f3ddca.js"><link rel="prefetch" href="/assets/js/238.89609040.js"><link rel="prefetch" href="/assets/js/239.96e88918.js"><link rel="prefetch" href="/assets/js/24.73f035c2.js"><link rel="prefetch" href="/assets/js/240.d2720ef3.js"><link rel="prefetch" href="/assets/js/241.fac839e8.js"><link rel="prefetch" href="/assets/js/242.433f1062.js"><link rel="prefetch" href="/assets/js/243.480419a3.js"><link rel="prefetch" href="/assets/js/244.b4a00e94.js"><link rel="prefetch" href="/assets/js/245.d7770c64.js"><link rel="prefetch" href="/assets/js/246.927e2fc5.js"><link rel="prefetch" href="/assets/js/247.9820384e.js"><link rel="prefetch" href="/assets/js/248.39079b18.js"><link rel="prefetch" href="/assets/js/249.0506c8bd.js"><link rel="prefetch" href="/assets/js/25.92b43b65.js"><link rel="prefetch" href="/assets/js/250.33fafc53.js"><link rel="prefetch" href="/assets/js/251.16254f3d.js"><link rel="prefetch" href="/assets/js/252.6afaac54.js"><link rel="prefetch" href="/assets/js/253.aee42317.js"><link rel="prefetch" href="/assets/js/254.b2b946e0.js"><link rel="prefetch" href="/assets/js/255.71cabec3.js"><link rel="prefetch" href="/assets/js/256.fa5e6562.js"><link rel="prefetch" href="/assets/js/257.40331b98.js"><link rel="prefetch" href="/assets/js/258.f9dce18b.js"><link rel="prefetch" href="/assets/js/259.cd293113.js"><link rel="prefetch" href="/assets/js/26.6379d76a.js"><link rel="prefetch" href="/assets/js/260.b038da31.js"><link rel="prefetch" href="/assets/js/261.a6d3e614.js"><link rel="prefetch" href="/assets/js/262.564f2d73.js"><link rel="prefetch" href="/assets/js/263.4de254df.js"><link rel="prefetch" href="/assets/js/264.f3d1da12.js"><link rel="prefetch" href="/assets/js/265.4535d5f4.js"><link rel="prefetch" href="/assets/js/266.7422b770.js"><link rel="prefetch" href="/assets/js/267.eeca8b71.js"><link rel="prefetch" href="/assets/js/268.f3e71c19.js"><link rel="prefetch" href="/assets/js/269.43980a33.js"><link rel="prefetch" href="/assets/js/27.91f8221a.js"><link rel="prefetch" href="/assets/js/270.5a384988.js"><link rel="prefetch" href="/assets/js/271.e6d1bcf9.js"><link rel="prefetch" href="/assets/js/272.d6a0e717.js"><link rel="prefetch" href="/assets/js/273.229e02c0.js"><link rel="prefetch" href="/assets/js/274.b489c953.js"><link rel="prefetch" href="/assets/js/275.368f0ea6.js"><link rel="prefetch" href="/assets/js/276.667cd691.js"><link rel="prefetch" href="/assets/js/277.e74b96bd.js"><link rel="prefetch" href="/assets/js/278.06265fa4.js"><link rel="prefetch" href="/assets/js/279.5edc260c.js"><link rel="prefetch" href="/assets/js/28.52b89c54.js"><link rel="prefetch" href="/assets/js/280.47096186.js"><link rel="prefetch" href="/assets/js/281.23c275fc.js"><link rel="prefetch" href="/assets/js/282.8e38fc17.js"><link rel="prefetch" href="/assets/js/283.e0aee82d.js"><link rel="prefetch" href="/assets/js/284.57cd3ecf.js"><link rel="prefetch" href="/assets/js/285.cc815920.js"><link rel="prefetch" href="/assets/js/286.96faa18b.js"><link rel="prefetch" href="/assets/js/287.d60843e1.js"><link rel="prefetch" href="/assets/js/288.54d4e177.js"><link rel="prefetch" href="/assets/js/289.715e3bfa.js"><link rel="prefetch" href="/assets/js/29.1c04a564.js"><link rel="prefetch" href="/assets/js/290.9df1bc56.js"><link rel="prefetch" href="/assets/js/291.6f0e0e98.js"><link rel="prefetch" href="/assets/js/292.eaa528af.js"><link rel="prefetch" href="/assets/js/293.27307238.js"><link rel="prefetch" href="/assets/js/294.33615821.js"><link rel="prefetch" href="/assets/js/295.f79ca535.js"><link rel="prefetch" href="/assets/js/296.b4ebd440.js"><link rel="prefetch" href="/assets/js/297.74ccd59f.js"><link rel="prefetch" href="/assets/js/298.5d645422.js"><link rel="prefetch" href="/assets/js/299.2a04f775.js"><link rel="prefetch" href="/assets/js/3.4badb5b0.js"><link rel="prefetch" href="/assets/js/30.978541d2.js"><link rel="prefetch" href="/assets/js/300.d2a7defe.js"><link rel="prefetch" href="/assets/js/301.1971cdbf.js"><link rel="prefetch" href="/assets/js/31.56ab09fe.js"><link rel="prefetch" href="/assets/js/32.8c8b518a.js"><link rel="prefetch" href="/assets/js/33.6e35c1cb.js"><link rel="prefetch" href="/assets/js/34.ee06f2c4.js"><link rel="prefetch" href="/assets/js/35.c154958f.js"><link rel="prefetch" href="/assets/js/36.388f933b.js"><link rel="prefetch" href="/assets/js/37.e3351f3d.js"><link rel="prefetch" href="/assets/js/38.29a219c6.js"><link rel="prefetch" href="/assets/js/39.71ac7a23.js"><link rel="prefetch" href="/assets/js/40.dfe285a9.js"><link rel="prefetch" href="/assets/js/41.42722f92.js"><link rel="prefetch" href="/assets/js/42.25f09e10.js"><link rel="prefetch" href="/assets/js/43.d1ddab47.js"><link rel="prefetch" href="/assets/js/44.add08956.js"><link rel="prefetch" href="/assets/js/45.b341cce5.js"><link rel="prefetch" href="/assets/js/46.28078120.js"><link rel="prefetch" href="/assets/js/47.14a409ae.js"><link rel="prefetch" href="/assets/js/48.a870ceae.js"><link rel="prefetch" href="/assets/js/49.aab4d4a4.js"><link rel="prefetch" href="/assets/js/5.458fe09e.js"><link rel="prefetch" href="/assets/js/50.8c1290a7.js"><link rel="prefetch" href="/assets/js/51.a94853c6.js"><link rel="prefetch" href="/assets/js/52.04c18171.js"><link rel="prefetch" href="/assets/js/53.c7f1963d.js"><link rel="prefetch" href="/assets/js/54.59db6b1c.js"><link rel="prefetch" href="/assets/js/55.ef85bef3.js"><link rel="prefetch" href="/assets/js/56.29320fb1.js"><link rel="prefetch" href="/assets/js/57.fb28ec6a.js"><link rel="prefetch" href="/assets/js/58.b62ae623.js"><link rel="prefetch" href="/assets/js/59.00697f09.js"><link rel="prefetch" href="/assets/js/6.015ac347.js"><link rel="prefetch" href="/assets/js/60.5aba173e.js"><link rel="prefetch" href="/assets/js/61.33642697.js"><link rel="prefetch" href="/assets/js/62.02d7198e.js"><link rel="prefetch" href="/assets/js/63.eba941ed.js"><link rel="prefetch" href="/assets/js/64.abfbdab2.js"><link rel="prefetch" href="/assets/js/65.9ca645af.js"><link rel="prefetch" href="/assets/js/66.52115026.js"><link rel="prefetch" href="/assets/js/67.351b2d7f.js"><link rel="prefetch" href="/assets/js/68.045c5593.js"><link rel="prefetch" href="/assets/js/69.d534a353.js"><link rel="prefetch" href="/assets/js/7.a7d91ca0.js"><link rel="prefetch" href="/assets/js/70.7cdd3474.js"><link rel="prefetch" href="/assets/js/71.2c8025af.js"><link rel="prefetch" href="/assets/js/72.0a82fe72.js"><link rel="prefetch" href="/assets/js/73.d192034d.js"><link rel="prefetch" href="/assets/js/74.d1fafe75.js"><link rel="prefetch" href="/assets/js/75.9c4f3209.js"><link rel="prefetch" href="/assets/js/76.643c6a2d.js"><link rel="prefetch" href="/assets/js/77.dd52d9f7.js"><link rel="prefetch" href="/assets/js/78.bd95697d.js"><link rel="prefetch" href="/assets/js/79.12df5b54.js"><link rel="prefetch" href="/assets/js/8.d08eb9d7.js"><link rel="prefetch" href="/assets/js/80.b879e8f6.js"><link rel="prefetch" href="/assets/js/81.78a4d49a.js"><link rel="prefetch" href="/assets/js/82.50666337.js"><link rel="prefetch" href="/assets/js/83.22b5dfab.js"><link rel="prefetch" href="/assets/js/84.11dc4764.js"><link rel="prefetch" href="/assets/js/85.263790a7.js"><link rel="prefetch" href="/assets/js/86.4815404b.js"><link rel="prefetch" href="/assets/js/87.9dc29b8d.js"><link rel="prefetch" href="/assets/js/88.c4fbe43b.js"><link rel="prefetch" href="/assets/js/89.1531fdaa.js"><link rel="prefetch" href="/assets/js/9.bec1194f.js"><link rel="prefetch" href="/assets/js/90.5ee62498.js"><link rel="prefetch" href="/assets/js/91.b213169d.js"><link rel="prefetch" href="/assets/js/92.bd0cdca6.js"><link rel="prefetch" href="/assets/js/93.d7ab5ac4.js"><link rel="prefetch" href="/assets/js/94.698742b5.js"><link rel="prefetch" href="/assets/js/95.19b4b577.js"><link rel="prefetch" href="/assets/js/96.c420c60f.js"><link rel="prefetch" href="/assets/js/97.24840f13.js"><link rel="prefetch" href="/assets/js/98.6c735cf7.js"><link rel="prefetch" href="/assets/js/99.4e460369.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32b41a9c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="远方的灯塔 - 专注于服务端技术分享" class="logo"> <span class="site-name can-hide">远方的灯塔 - 专注于服务端技术分享</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><a href="/backend/" class="link-title">后端开发</a> <span class="title" style="display:none;">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/#JavaSE" class="nav-link">Java SE</a></li><li class="dropdown-item"><!----> <a href="/backend/#MyBatis" class="nav-link">MyBatis</a></li><li class="dropdown-item"><!----> <a href="/backend/#分布式" class="nav-link">分布式</a></li></ul></div></div><div class="nav-item"><a href="/leaf/" class="nav-link">专题目录</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章索引" class="dropdown-title"><a href="/archives/" class="link-title">文章索引</a> <span class="title" style="display:none;">文章索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/ing/" class="nav-link">心情随笔</a></div><div class="nav-item"><a href="/uos/" class="nav-link">UOS专区</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/draft/" class="nav-link">草稿箱</a></li><li class="dropdown-item"><!----> <a href="/pick/" class="nav-link">待整理</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/terwer/terwer.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/photo.jpg"> <div class="blogger-info"><h3>Terwer Green</h3> <span>一个后端老菜鸟</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><a href="/backend/" class="link-title">后端开发</a> <span class="title" style="display:none;">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/#JavaSE" class="nav-link">Java SE</a></li><li class="dropdown-item"><!----> <a href="/backend/#MyBatis" class="nav-link">MyBatis</a></li><li class="dropdown-item"><!----> <a href="/backend/#分布式" class="nav-link">分布式</a></li></ul></div></div><div class="nav-item"><a href="/leaf/" class="nav-link">专题目录</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章索引" class="dropdown-title"><a href="/archives/" class="link-title">文章索引</a> <span class="title" style="display:none;">文章索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/ing/" class="nav-link">心情随笔</a></div><div class="nav-item"><a href="/uos/" class="nav-link">UOS专区</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/draft/" class="nav-link">草稿箱</a></li><li class="dropdown-item"><!----> <a href="/pick/" class="nav-link">待整理</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/terwer/terwer.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mybatis-TODO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ZK-TODO</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/post/zookeeper-basic-use.html" aria-current="page" class="active sidebar-link">Zookeeper的基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/post/zookeeper-basic-use.html#zookeeper-系统模型" class="sidebar-link">Zookeeper 系统模型</a></li><li class="sidebar-sub-header level2"><a href="/post/zookeeper-basic-use.html#zookeeper-命令行操作" class="sidebar-link">Zookeeper 命令行操作</a></li><li class="sidebar-sub-header level2"><a href="/post/zookeeper-basic-use.html#zookeeper-的-api-实用" class="sidebar-link">Zookeeper 的 api 实用</a></li><li class="sidebar-sub-header level2"><a href="/post/zookeeper-basic-use.html#zookeeper-开业客户端" class="sidebar-link">Zookeeper 开业客户端</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发与多线程-TODO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaSE-TODO</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-185b47b6><div class="articleInfo" data-v-185b47b6><ul class="breadcrumbs" data-v-185b47b6><li data-v-185b47b6><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-185b47b6></a></li> <li data-v-185b47b6><a href="/categories/?category=TODO" title="分类" data-v-185b47b6>TODO</a></li><li data-v-185b47b6><a href="/categories/?category=ZK-TODO" title="分类" data-v-185b47b6>ZK-TODO</a></li></ul> <div class="info" data-v-185b47b6><div title="作者" class="author iconfont icon-touxiang" data-v-185b47b6><a href="https://github.com/terwer" target="_blank" title="作者" class="beLink" data-v-185b47b6>terwer</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-185b47b6><a href="javascript:;" data-v-185b47b6>2022-06-03</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Zookeeper的基本使用<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="zookeeper-的基本使用"><a href="#zookeeper-的基本使用" class="header-anchor">#</a> Zookeeper 的基本使用</h1> <blockquote><p>文章更新历史</p> <p>2022/06/03 feat:初稿。</p></blockquote> <h2 id="zookeeper-系统模型"><a href="#zookeeper-系统模型" class="header-anchor">#</a> Zookeeper 系统模型</h2> <h3 id="zookeeper-的数据节点-znode"><a href="#zookeeper-的数据节点-znode" class="header-anchor">#</a> Zookeeper 的数据节点 ZNode</h3> <p>Zookeeper 中，保存数据信息的节点，成为 ZNode。</p> <p>ZNode 是 Zookeeper 中的最小数据单位。ZNode 可以挂在子 ZNode，最终形成了 ZNode 树，成为 ZNode Tree。ZNode 采用了类似文件系统的层级树状结构进行管理。</p> <p><img src="https://ghproxy.com/https://raw.githubusercontent.com/terwer/upload/main/img/20220604223819.png" alt="image-20220604223814769"></p> <p>Zookeeper 的节点路径类似与 Unix 的文件系统，由/开头，可以在节点写入数据，也可以创建子节点。</p> <h3 id="znode-的类型"><a href="#znode-的类型" class="header-anchor">#</a> ZNode 的类型</h3> <p>Zookeeper 的节点类型可分为三大类</p> <p>持久性节点（Persistent）</p> <p>临时性节点（Ephemeral）</p> <p>顺序性节点（Sequiental）</p> <p>在开发中，通常生成四种节点类型：持久性节点、持久顺序节点、临时节点、临时顺序节点。不同的节点会有不同的声明周期。</p> <p><strong>持久性节点</strong>：是 Zookeeper 中最常见的节点类型，节点创建后会一直存在于服务器，直到删除操作主动删除。</p> <p><strong>持久顺序节点</strong>：有顺序的持久节点，节点和持久节点一样，只是有顺序。顺序特性的实质是在创建节点的时候，会在节点后面加上一个数字后缀，代表节点的顺序。</p> <p><strong>临时节点</strong>：会被自动清理掉的节点。生命周期和客户端会话绑定在一起，客户端会话结束，节点也会被删除。</p> <p>与持久性节点不同，临时节点不能创建子节点。</p> <p><strong>临时顺序节点</strong>：有顺序的临时节点，和持久顺序节点相同，在创建的时候会在名字后面加上数字后缀。</p> <h3 id="事务-id"><a href="#事务-id" class="header-anchor">#</a> 事务 ID</h3> <p>事务具有 ACID 的特性：即原子性（Atomic）、一致性（Consistency）、隔离性（Isolation）和持久性（Durability）。</p> <p>在 Zookeeper 中，事务是指能够改变服务器状态的操作，也称之为事务操作或者更新操作。</p> <p>对于每个事务操作，Zookeeper 都会分配一个全局唯一事务 ID，称为 <strong>ZXID</strong>，通常是一个 64 位的数字。每一个 ZXID 对应一个事务操作，从 ZXID 可以间接识别 Zookeeper 处理更新操作请求的全局顺序。</p> <h3 id="使用客户端连接-zookeeper"><a href="#使用客户端连接-zookeeper" class="header-anchor">#</a> 使用客户端连接 Zookeeper</h3> <p>如果是 docker 版，先进入 shell</p> <p><img src="https://ghproxy.com/https://raw.githubusercontent.com/terwer/upload/main/img/20220702204843.png" alt="image-20220702204837498">。</p> <p>连接 server</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./zkCli.sh <span class="token parameter variable">-server</span> <span class="token number">127.0</span>.0.1:2181
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>信息如下</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>root@zoo1:/apache-zookeeper-3.8.0-bin<span class="token comment"># cd bin</span>
root@zoo1:/apache-zookeeper-3.8.0-bin/bin<span class="token comment"># ./zkCli.sh -server 127.0.0.1:2181</span>
Connecting to <span class="token number">127.0</span>.0.1:2181
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,639 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:zookeeper.version<span class="token operator">=</span><span class="token number">3.8</span>.0-5a02a05eddb59aee6ac762f7ea82e92a68eb9c0f, built on <span class="token number">2022</span>-02-25 08:49 UTC
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,641 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:host.name<span class="token operator">=</span>zoo1
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,641 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.version<span class="token operator">=</span><span class="token number">11.0</span>.15
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,641 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.vendor<span class="token operator">=</span>Oracle Corporation
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,641 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.home<span class="token operator">=</span>/usr/local/openjdk-11
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,642 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.class.path<span class="token operator">=</span>/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/zookeeper-server/target/classes:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/build/classes:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/zookeeper-server/target/lib/*.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/build/lib/*.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/zookeeper-prometheus-metrics-3.8.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/zookeeper-jute-3.8.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/zookeeper-3.8.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/snappy-java-1.1.7.7.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/slf4j-api-1.7.30.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/simpleclient_servlet-0.9.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/simpleclient_hotspot-0.9.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/simpleclient_common-0.9.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/simpleclient-0.9.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-transport-native-unix-common-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-transport-native-epoll-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-transport-classes-epoll-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-transport-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-tcnative-classes-2.0.48.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-tcnative-2.0.48.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-resolver-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-handler-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-common-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-codec-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/netty-buffer-4.1.73.Final.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/metrics-core-4.1.12.1.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/logback-core-1.2.10.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/logback-classic-1.2.10.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jline-2.14.6.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-util-ajax-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-util-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-servlet-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-server-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-security-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-io-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jetty-http-9.4.43.v20210629.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/javax.servlet-api-3.1.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jackson-databind-2.13.1.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jackson-core-2.13.1.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/jackson-annotations-2.13.1.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/commons-io-2.11.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/commons-cli-1.4.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/lib/audience-annotations-0.12.0.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/zookeeper-*.jar:/apache-zookeeper-3.8.0-bin/bin/<span class="token punctuation">..</span>/zookeeper-server/src/main/resources/lib/*.jar:/conf:
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,642 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.library.path<span class="token operator">=</span>/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,642 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.io.tmpdir<span class="token operator">=</span>/tmp
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,642 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:java.compiler<span class="token operator">=</span><span class="token operator">&lt;</span>NA<span class="token operator">&gt;</span>
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,642 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:os.name<span class="token operator">=</span>Linux
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:os.arch<span class="token operator">=</span>amd64
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:os.version<span class="token operator">=</span><span class="token number">5.10</span>.104-linuxkit
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:user.name<span class="token operator">=</span>root
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:user.home<span class="token operator">=</span>/root
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:user.dir<span class="token operator">=</span>/apache-zookeeper-3.8.0-bin/bin
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:os.memory.free<span class="token operator">=</span>116MB
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,643 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:os.memory.max<span class="token operator">=</span>256MB
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,644 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.Environment@98<span class="token punctuation">]</span> - Client environment:os.memory.total<span class="token operator">=</span>128MB
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,646 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.ZooKeeper@637<span class="token punctuation">]</span> - Initiating client connection, <span class="token assign-left variable">connectString</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:2181 <span class="token assign-left variable">sessionTimeout</span><span class="token operator">=</span><span class="token number">30000</span> <span class="token assign-left variable">watcher</span><span class="token operator">=</span>org.apache.zookeeper.ZooKeeperMain<span class="token variable">$MyWatcher</span>@6ec8211c
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,651 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.c.X509Util@77<span class="token punctuation">]</span> - Setting <span class="token parameter variable">-D</span> <span class="token assign-left variable">jdk.tls.rejectClientInitiatedRenegotiation</span><span class="token operator">=</span>true to disable client-initiated TLS renegotiation
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,656 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.ClientCnxnSocket@239<span class="token punctuation">]</span> - jute.maxbuffer value is <span class="token number">1048575</span> Bytes
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,662 <span class="token punctuation">[</span>myid:<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main:o.a.z.ClientCnxn@1732<span class="token punctuation">]</span> - zookeeper.request.timeout value is <span class="token number">0</span>. feature <span class="token assign-left variable">enabled</span><span class="token operator">=</span>false
Welcome to ZooKeeper<span class="token operator">!</span>
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,675 <span class="token punctuation">[</span>myid:127.0.0.1:2181<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main-SendThread<span class="token punctuation">(</span><span class="token number">127.0</span>.0.1:2181<span class="token punctuation">)</span>:o.a.z.ClientCnxn<span class="token variable">$SendThread</span>@1171<span class="token punctuation">]</span> - Opening socket connection to server localhost/127.0.0.1:2181.
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,675 <span class="token punctuation">[</span>myid:127.0.0.1:2181<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main-SendThread<span class="token punctuation">(</span><span class="token number">127.0</span>.0.1:2181<span class="token punctuation">)</span>:o.a.z.ClientCnxn<span class="token variable">$SendThread</span>@1173<span class="token punctuation">]</span> - SASL config status: Will not attempt to authenticate using SASL <span class="token punctuation">(</span>unknown error<span class="token punctuation">)</span>
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,686 <span class="token punctuation">[</span>myid:127.0.0.1:2181<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main-SendThread<span class="token punctuation">(</span><span class="token number">127.0</span>.0.1:2181<span class="token punctuation">)</span>:o.a.z.ClientCnxn<span class="token variable">$SendThread</span>@1005<span class="token punctuation">]</span> - Socket connection established, initiating session, client: /127.0.0.1:49668, server: localhost/127.0.0.1:2181
JLine support is enabled
<span class="token number">2022</span>-07-02 <span class="token number">12</span>:52:32,724 <span class="token punctuation">[</span>myid:127.0.0.1:2181<span class="token punctuation">]</span> - INFO  <span class="token punctuation">[</span>main-SendThread<span class="token punctuation">(</span><span class="token number">127.0</span>.0.1:2181<span class="token punctuation">)</span>:o.a.z.ClientCnxn<span class="token variable">$SendThread</span>@1444<span class="token punctuation">]</span> - Session establishment complete on server localhost/127.0.0.1:2181, session <span class="token function">id</span> <span class="token operator">=</span> 0x100004a571a0000, negotiated <span class="token function">timeout</span> <span class="token operator">=</span> <span class="token number">30000</span>

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
<span class="token punctuation">[</span>zk: <span class="token number">127.0</span>.0.1:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>查看所有节点</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ls</span> /
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://ghproxy.com/https://raw.githubusercontent.com/terwer/upload/main/img/20220702205359.png" alt="image-20220702205359400"></p> <p>查看某个节点</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ls</span> /zookeeper
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="znode-的状态信息"><a href="#znode-的状态信息" class="header-anchor">#</a> ZNode 的状态信息</h3> <p>使用 <code>ls -s /zookeeper</code> 代替 <code>ls2</code></p> <p>新版本已经没有 <code>ls2</code> 了</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ls</span> <span class="token parameter variable">-s</span> /zookeeper
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://ghproxy.com/https://raw.githubusercontent.com/terwer/upload/main/img/20220702205638.png" alt="image-20220702205637988"></p> <p>参考：</p> <p><a href="https://blog.csdn.net/kuifanshu3027/article/details/106452692" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/kuifanshu3027/article/details/106452692<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>整个 ZNode 节点包括两部分信息：节点数据内容和节点状态信息。</p> <p>qoute 是数据内容，其他的属于状态信息。具体含义如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cZxid 指的是 Create ZXID ，表示节点被创建时的事务ID。
ctime 指的是 Create Time ，表示节点创建时间。
mZxid 指的是 Modified ZXID ，表示事务最后一次被修改时的事务ID。
mtime 指的是 Modified Time， 表示节点最后一次被修改的世间。
pZxid 表示该节点的子节点列表最后一次被修改时的事务ID。只有子节点列表更新才会更新 pZxid，子节点内容变更不会更新。
cversion 表示子节点的版本号。
dataVersion 表示内容的版本号。
aclVersion 表示acl的版本
ephemeralOwner 表示创建该临时节点时的会话 sessionID，如果是持久性节点，那么值为0。
dataLength 表示数据长度。
numChildren 表示直系子节点数目
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="water-数据变更通知"><a href="#water-数据变更通知" class="header-anchor">#</a> Water-数据变更通知</h3> <h3 id="acl-保障数据的安全"><a href="#acl-保障数据的安全" class="header-anchor">#</a> ACL-保障数据的安全</h3> <h2 id="zookeeper-命令行操作"><a href="#zookeeper-命令行操作" class="header-anchor">#</a> Zookeeper 命令行操作</h2> <h2 id="zookeeper-的-api-实用"><a href="#zookeeper-的-api-实用" class="header-anchor">#</a> Zookeeper 的 api 实用</h2> <h2 id="zookeeper-开业客户端"><a href="#zookeeper-开业客户端" class="header-anchor">#</a> Zookeeper 开业客户端</h2></div> <div><h2 id="commentArea">评论</h2> <div id="Comments"></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/terwer/terwer.github.io/edit/master/docs/010.TODO/2.ZK-TODO/300.Zookeeper的基本使用.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=framework" title="标签">#framework</a><a href="/tags/?tag=zk" title="标签">#zk</a><a href="/tags/?tag=zookeeper" title="标签">#zookeeper</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/07/02, 21:48:37</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/post/mybatis-summary-and-knowledge-expansion.html" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">MyBatis总结与知识扩展</div></a> <a href="/post/multithreading-and-concurrent-design-principle.html" class="page-nav-centre page-nav-centre-next"><div class="tooltip">并发编程之多线程与并发设计原理</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/post/mybatis-summary-and-knowledge-expansion.html" class="prev">MyBatis总结与知识扩展</a></span> <span class="next"><a href="/post/multithreading-and-concurrent-design-principle.html">并发编程之多线程与并发设计原理</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/post/readme-1j4ltp.html"><div>
            文档首页
            <!----></div></a> <span class="date">09-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/post/configure-entry-video-brpm9.html"><div>
            配置入门视频
            <!----></div></a> <span class="date">09-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/post/mysql-related-matters-zd1a1z.html"><div>
            MySQL相关事项
            <!----></div></a> <span class="date">09-28</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:youweics@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/terwer" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=6820033188" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2011-2022
    <span>Terwer Green | 
        <a href="https://github.com/terwer/terwer.github.io/blob/master/LICENSE" target="_blank">MIT License</a> |
        <a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2022020721号-1</a> | 
        <a href="https://tongji.baidu.com/web/10000454757/overview/index?siteId=17924431" target="_blank"><img src="https://tongji.baidu.com/sc-web/image/icon/13.gif" style="vertical-align: middle;height: 14px;margin-top: -1px;"/> 百度统计</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26a0fb1a.js" defer></script><script src="/assets/js/2.8656c062.js" defer></script><script src="/assets/js/4.79e7f4de.js" defer></script><script src="/assets/js/212.d1d8f2d3.js" defer></script>
  </body>
</html>
