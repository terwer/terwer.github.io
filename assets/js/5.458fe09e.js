(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{293:function(e,t,n){},334:function(e,t){},359:function(e,t,n){"use strict";n(293)},363:function(e,t,n){"use strict";n.r(t);var o=new(n(0).a),r={functional:!0,render(e,{parent:t,children:n,listeners:o}){if(t._isMounted)return o.contentReady&&o.contentReady(),n;t.$once("hook:mounted",()=>{t.$forceUpdate()})}},c=n(8),d=Object(c.a)(r,void 0,void 0,!1,null,null,null).exports;const p=n(333);var i={name:"EncryptedContent",components:{MyClientOnly:d},props:{keyName:{type:String,required:!0},owners:{type:String,required:!0},encrypted:{type:Boolean,required:!0}},data:()=>({encryptedContent:"",keyFromInput:"",decryptedComponent:""}),computed:{contentTitle:()=>"加密内容",unencryptedText:()=>"未加密内容",encryptedText:()=>"该内容已加密，如需访问，请留言或者联系 youweics@163.com 获取密码。",decryptedText:()=>"文章已成功解密。",decryptButtonText:()=>"查看",icon(){return this.encrypted?(this.decryptedComponent,""):""}},methods:{onContentReady(){this.$nextTick(()=>{this.encrypted?this.encryptedContent=this.$refs.content.innerText.replace(/\s/g,"").replace(/\*/g,"="):o.$emit("decrypt-already")})},onConfirm(){try{var e=p.AES.decrypt(this.encryptedContent,this.keyFromInput).toString(p.enc.Utf8);this.$nextTick(()=>{const t=e.replace(/\s*/g,"");if(0==t.length||""==t)alert("密码错误，请留言获取密码，或者联系 youweics@163.com"),o.$emit("decrypt-failed");else{const{component:t}=JSON.parse(e);this.decryptedComponent=t,o.$emit("decrypt-succeed")}})}catch(e){alert("密码错误，请留言获取密码，或者联系 youweics@163.com"),console.log(e),o.$emit("decrypt-failed")}}}},s=(n(359),Object(c.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("MyClientOnly",{on:{contentReady:e.onContentReady}},[t("div",{staticClass:"encrypted-header"},[e.icon?t("p",{staticClass:"encrypted-icon"},[t("i",{class:e.icon})]):e._e(),e._v(" "),t("p",{staticClass:"encrypted-title"},[e._v("\n        "+e._s(e.contentTitle)+"\n      ")]),e._v(" "),e.encrypted?e.decryptedComponent?t("div",[t("p",[e._v(e._s(e.decryptedText))])]):t("div",[t("p",[e._v(e._s(e.encryptedText))]),e._v(" "),t("p",[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.keyFromInput,expression:"keyFromInput",modifiers:{lazy:!0}}],attrs:{type:"password"},domProps:{value:e.keyFromInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onConfirm.apply(null,arguments)},change:function(t){e.keyFromInput=t.target.value}}}),e._v(" "),t("button",{on:{click:e.onConfirm}},[e._v("\n            "+e._s(e.decryptButtonText)+"\n          ")])])]):t("div",[t("p",[e._v(e._s(e.unencryptedText))])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.encrypted,expression:"!encrypted"}],ref:"content"},[e._t("default")],2),e._v(" "),e.decryptedComponent?t(e.decryptedComponent,{tag:"component"}):e._e()],1)],1)}),[],!1,null,null,null));t.default=s.exports}}]);